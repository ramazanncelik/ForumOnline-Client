{"ast":null,"code":"import { user } from '../store/auth';\nimport store from '../store/index';\nimport { setAllPosts } from '../store/allPosts';\nimport { setMyPosts } from '../store/myPosts';\nimport axios from 'axios';\nimport { toast } from 'react-hot-toast';\nexport const mainUrl = \"http://localhost:5000\";\nexport const defaultUserImageUrl = \"https://firebasestorage.googleapis.com/v0/b/eidos-95e1f.appspot.com/o/Uploads%2FUsers%2Fuserdefault.png?alt=media&token=06397d82-3dc8-4783-b110-a22b5d68e92e\";\nexport const language = navigator.language;\nexport const getCurrentUser = userId => {\n  axios.post(`${mainUrl}/api/getUser`, {\n    userId: userId\n  }).then(result => {\n    if (result.data.error) {\n      toast.error(result.data.message);\n    } else {\n      setUserData(result.data.user);\n    }\n  });\n};\nexport const setUserData = infos => {\n  store.dispatch(user({\n    id: infos._id,\n    Email: infos.Email,\n    NickName: infos.NickName,\n    Name: infos.Name,\n    Biography: infos.Biography,\n    Post: infos.Post,\n    ImageUrl: infos.ImageUrl,\n    EmailVerify: infos.EmailVerify,\n    Gender: infos.Gender,\n    Role: infos.Role\n  }));\n};\nexport const getPosts = userId => {\n  axios.get(`${mainUrl}/api/getPosts`).then(result => {\n    if (result.data.error) {\n      console.log(result.data.message);\n    } else {\n      const myPosts = result.data.posts.filter(post => post.OwnerId === userId);\n      setCurrentUserPosts(myPosts);\n      setPosts(result.data.posts);\n    }\n  });\n};\nexport const setPosts = posts => {\n  store.dispatch(setAllPosts(posts.reduce((posts, post) => [...posts, {\n    ...post\n  }], [])));\n};\nexport const setCurrentUserPosts = myPosts => {\n  store.dispatch(setMyPosts(myPosts.reduce((myPosts, myPost) => [...myPosts, {\n    ...myPost\n  }], [])));\n};","map":{"version":3,"names":["user","store","setAllPosts","setMyPosts","axios","toast","mainUrl","defaultUserImageUrl","language","navigator","getCurrentUser","userId","post","then","result","data","error","message","setUserData","infos","dispatch","id","_id","Email","NickName","Name","Biography","Post","ImageUrl","EmailVerify","Gender","Role","getPosts","get","console","log","myPosts","posts","filter","OwnerId","setCurrentUserPosts","setPosts","reduce","myPost"],"sources":["D:/JavaScript/ReactProjects/forumonline/client/src/utils/utils.js"],"sourcesContent":["\r\nimport { user } from '../store/auth';\r\nimport store from '../store/index'\r\nimport { setAllPosts } from '../store/allPosts';\r\nimport { setMyPosts } from '../store/myPosts';\r\nimport axios from 'axios'\r\nimport { toast } from 'react-hot-toast'\r\n\r\nexport const mainUrl = \"http://localhost:5000\"\r\nexport const defaultUserImageUrl = \"https://firebasestorage.googleapis.com/v0/b/eidos-95e1f.appspot.com/o/Uploads%2FUsers%2Fuserdefault.png?alt=media&token=06397d82-3dc8-4783-b110-a22b5d68e92e\";\r\nexport const language = navigator.language;\r\n\r\nexport const getCurrentUser = (userId) => {\r\n    axios.post(`${mainUrl}/api/getUser`, { userId: userId }).then((result) => {\r\n        if (result.data.error) {\r\n            toast.error(result.data.message);\r\n        } else {\r\n            setUserData(result.data.user)\r\n        }\r\n    });\r\n}\r\n\r\nexport const setUserData = (infos) => {\r\n    store.dispatch(user({\r\n        id: infos._id,\r\n        Email: infos.Email,\r\n        NickName: infos.NickName,\r\n        Name: infos.Name,\r\n        Biography: infos.Biography,\r\n        Post: infos.Post,\r\n        ImageUrl: infos.ImageUrl,\r\n        EmailVerify: infos.EmailVerify,\r\n        Gender: infos.Gender,\r\n        Role: infos.Role,\r\n    }));\r\n}\r\n\r\nexport const getPosts = (userId) => {\r\n    axios.get(`${mainUrl}/api/getPosts`).then((result) => {\r\n        if (result.data.error) {\r\n            console.log(result.data.message)\r\n        } else {\r\n            const myPosts = result.data.posts.filter(post => post.OwnerId === userId);\r\n            setCurrentUserPosts(myPosts)\r\n            setPosts(result.data.posts);\r\n        }\r\n    });\r\n}\r\n\r\nexport const setPosts = (posts) => {\r\n    store.dispatch(setAllPosts(posts.reduce((posts, post) => [...posts, { ...post }], [])))\r\n}\r\nexport const setCurrentUserPosts = (myPosts) => {\r\n    store.dispatch(setMyPosts(myPosts.reduce((myPosts, myPost) => [...myPosts, { ...myPost }], [])))\r\n}"],"mappings":"AACA,SAASA,IAAI,QAAQ,eAAe;AACpC,OAAOC,KAAK,MAAM,gBAAgB;AAClC,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,iBAAiB;AAEvC,OAAO,MAAMC,OAAO,GAAG,uBAAuB;AAC9C,OAAO,MAAMC,mBAAmB,GAAG,8JAA8J;AACjM,OAAO,MAAMC,QAAQ,GAAGC,SAAS,CAACD,QAAQ;AAE1C,OAAO,MAAME,cAAc,GAAIC,MAAM,IAAK;EACtCP,KAAK,CAACQ,IAAI,CAAE,GAAEN,OAAQ,cAAa,EAAE;IAAEK,MAAM,EAAEA;EAAO,CAAC,CAAC,CAACE,IAAI,CAAEC,MAAM,IAAK;IACtE,IAAIA,MAAM,CAACC,IAAI,CAACC,KAAK,EAAE;MACnBX,KAAK,CAACW,KAAK,CAACF,MAAM,CAACC,IAAI,CAACE,OAAO,CAAC;IACpC,CAAC,MAAM;MACHC,WAAW,CAACJ,MAAM,CAACC,IAAI,CAACf,IAAI,CAAC;IACjC;EACJ,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMkB,WAAW,GAAIC,KAAK,IAAK;EAClClB,KAAK,CAACmB,QAAQ,CAACpB,IAAI,CAAC;IAChBqB,EAAE,EAAEF,KAAK,CAACG,GAAG;IACbC,KAAK,EAAEJ,KAAK,CAACI,KAAK;IAClBC,QAAQ,EAAEL,KAAK,CAACK,QAAQ;IACxBC,IAAI,EAAEN,KAAK,CAACM,IAAI;IAChBC,SAAS,EAAEP,KAAK,CAACO,SAAS;IAC1BC,IAAI,EAAER,KAAK,CAACQ,IAAI;IAChBC,QAAQ,EAAET,KAAK,CAACS,QAAQ;IACxBC,WAAW,EAAEV,KAAK,CAACU,WAAW;IAC9BC,MAAM,EAAEX,KAAK,CAACW,MAAM;IACpBC,IAAI,EAAEZ,KAAK,CAACY;EAChB,CAAC,CAAC,CAAC;AACP,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIrB,MAAM,IAAK;EAChCP,KAAK,CAAC6B,GAAG,CAAE,GAAE3B,OAAQ,eAAc,CAAC,CAACO,IAAI,CAAEC,MAAM,IAAK;IAClD,IAAIA,MAAM,CAACC,IAAI,CAACC,KAAK,EAAE;MACnBkB,OAAO,CAACC,GAAG,CAACrB,MAAM,CAACC,IAAI,CAACE,OAAO,CAAC;IACpC,CAAC,MAAM;MACH,MAAMmB,OAAO,GAAGtB,MAAM,CAACC,IAAI,CAACsB,KAAK,CAACC,MAAM,CAAC1B,IAAI,IAAIA,IAAI,CAAC2B,OAAO,KAAK5B,MAAM,CAAC;MACzE6B,mBAAmB,CAACJ,OAAO,CAAC;MAC5BK,QAAQ,CAAC3B,MAAM,CAACC,IAAI,CAACsB,KAAK,CAAC;IAC/B;EACJ,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMI,QAAQ,GAAIJ,KAAK,IAAK;EAC/BpC,KAAK,CAACmB,QAAQ,CAAClB,WAAW,CAACmC,KAAK,CAACK,MAAM,CAAC,CAACL,KAAK,EAAEzB,IAAI,KAAK,CAAC,GAAGyB,KAAK,EAAE;IAAE,GAAGzB;EAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AAC3F,CAAC;AACD,OAAO,MAAM4B,mBAAmB,GAAIJ,OAAO,IAAK;EAC5CnC,KAAK,CAACmB,QAAQ,CAACjB,UAAU,CAACiC,OAAO,CAACM,MAAM,CAAC,CAACN,OAAO,EAAEO,MAAM,KAAK,CAAC,GAAGP,OAAO,EAAE;IAAE,GAAGO;EAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AACpG,CAAC"},"metadata":{},"sourceType":"module"}